<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Lektion 2: Kernkompetenzen der Patientenversorgung - Deutsch fÃ¼r Vietnamesen">
    <title>Lektion 2: Kernkompetenzen der Patientenversorgung - Deutsch Campus</title>
    <style>
        /* CSS Reset und Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
        }

        .lesson-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Navigation Styles */
        .lesson-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab-button {
            background: #e9ecef;
            border: none;
            padding: 12px 24px;
            margin: 0 4px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-height: 44px;
        }

        .tab-button:hover {
            background: #dee2e6;
        }

        .tab-button.active {
            background: #007bff;
            color: white;
        }

        .lesson-panel {
            display: none;
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .lesson-panel.active {
            display: block;
        }

        /* Section Headers */
        h1 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            color: #2c3e50;
        }

        h2 {
            font-size: 1.5rem;
            margin: 2rem 0 1rem 0;
            color: #34495e;
        }

        h3 {
            font-size: 1.25rem;
            margin: 1.5rem 0 1rem 0;
            color: #2c3e50;
        }

        /* Color-coded sections */
        .vocabulary-section {
            background: #e7f3ff;
            border-left: 6px solid #007bff;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        .grammar-section {
            background: #e8f5e8;
            border-left: 6px solid #28a745;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        .production-section {
            background: #fff3e0;
            border-left: 6px solid #fd7e14;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        /* Vocabulary Items */
        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .vocab-item {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .vocab-word {
            font-size: 1.1rem;
            font-weight: bold;
            color: #007bff;
            display: block;
            margin-bottom: 0.5rem;
        }

        .vocab-ipa {
            font-style: italic;
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .vocab-vietnamese {
            color: #28a745;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .vocab-sample {
            font-style: italic;
            color: #6c757d;
            margin-bottom: 0.5rem;
        }

        .vocab-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .sound-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            min-height: 32px;
        }

        .sound-button:hover {
            background: #0056b3;
        }

        .image-link {
            color: #28a745;
            text-decoration: none;
            font-size: 12px;
        }

        /* Grammar Examples */
        .grammar-examples {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }

        .grammar-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .grammar-table th,
        .grammar-table td {
            padding: 8px 12px;
            border: 1px solid #dee2e6;
            text-align: left;
        }

        .grammar-table th {
            background: #e9ecef;
            font-weight: bold;
        }

        /* Reading Text */
        .reading-text {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        /* Interactive Elements */
        .interactive-exercise {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            margin: 1rem 0;
        }

        .exercise-item {
            margin: 1rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .exercise-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 16px;
            margin: 0.5rem 0;
        }

        .exercise-input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        .check-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 0.5rem 0;
        }

        .check-button:hover {
            background: #218838;
        }

        .feedback {
            padding: 0.75rem;
            border-radius: 4px;
            margin: 0.5rem 0;
            font-weight: 500;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Writing Areas */
        .writing-area {
            margin: 1rem 0;
        }

        .writing-textarea {
            width: 100%;
            min-height: 150px;
            padding: 12px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
        }

        .writing-textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        .word-count {
            text-align: right;
            font-size: 14px;
            color: #6c757d;
            margin-top: 0.5rem;
        }

        .save-indicator {
            color: #28a745;
            font-size: 14px;
            margin-left: 0.5rem;
        }

        /* Error Analysis */
        .error-analysis {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }

        .error-item {
            margin: 0.5rem 0;
            padding: 0.5rem;
            background: white;
            border-radius: 4px;
        }

        /* Vietnamese translations */
        .vietnamese {
            color: #6c757d;
            font-style: italic;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .lesson-container {
                padding: 0.5rem;
            }

            .lesson-panel {
                padding: 1rem;
            }

            .vocab-grid {
                grid-template-columns: 1fr;
            }

            .tab-button {
                padding: 10px 16px;
                font-size: 14px;
            }

            h1 {
                font-size: 1.5rem;
            }
        }

        /* Print Styles */
        @media print {
            body {
                background: white !important;
                color: black !important;
                font-size: 12pt !important;
            }

            .lesson-tabs {
                display: none !important;
            }

            .lesson-panel {
                display: block !important;
                page-break-before: always;
                box-shadow: none !important;
                border: 1px solid black !important;
            }

            .lesson-panel:first-child {
                page-break-before: avoid;
            }

            .vocabulary-section {
                border: 2px solid black !important;
                background: white !important;
            }

            .grammar-section {
                border: 2px solid black !important;
                background: white !important;
            }

            .production-section {
                border: 2px solid black !important;
                background: white !important;
            }

            .sound-button, .check-button {
                display: none !important;
            }

            .interactive-exercise::after {
                content: "Anweisungen fÃ¼r Selbstkontrolle: ÃœberprÃ¼fen Sie Ihre Antworten mit einem Partner oder Lehrer.";
                display: block;
                font-style: italic;
                margin-top: 1rem;
                padding: 0.5rem;
                border-top: 1px solid black;
            }
        }

        /* Progress indicator */
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #28a745);
            width: 0%;
            transition: width 0.3s ease;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        .emoji-bounce {
            display: inline-block;
            animation: bounce 1.2s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .emoji-wave {
            display: inline-block;
            animation: wave 2s infinite;
        }
        @keyframes wave {
            0% { transform: rotate(0deg); }
            10% { transform: rotate(14deg); }
            20% { transform: rotate(-8deg); }
            30% { transform: rotate(14deg); }
            40% { transform: rotate(-4deg); }
            50% { transform: rotate(10deg); }
            60% { transform: rotate(0deg); }
            100% { transform: rotate(0deg); }
        }
    </style>
</head>
<body>
    <!-- Standalone Header -->
    <header class="main-header">
        <h1 style="font-size:2.5rem; text-align:center; margin: 1.5rem 0; color:#007bff; letter-spacing:1px; display:flex; align-items:center; justify-content:center; gap:1rem;">
            <span style="display:inline-block; animation: spin 2s linear infinite;">ğŸ©º</span>
            Kernkompetenzen der Patientenversorgung
            <span style="display:inline-block; animation: pulse 1.5s infinite;">ğŸ’™</span>
        </h1>
        <div style="text-align:center; font-size:1.2rem; color:#34495e; margin-bottom:1rem;">
            <span style="margin:0 0.5rem;">ğŸ‘©â€âš•ï¸</span>
            <span style="margin:0 0.5rem;">ğŸ¥</span>
            <span style="margin:0 0.5rem;">ğŸŒ™</span>
            <span style="margin:0 0.5rem;">ğŸ’Š</span>
            <span style="margin:0 0.5rem;">ğŸ“</span>
            <span style="margin:0 0.5rem;">ğŸ¤</span>
            <span style="margin:0 0.5rem;">ğŸ˜Š</span>
        </div>
    </header>
    <div class="lesson-container">
        <nav class="lesson-tabs">
            <button class="tab-button active" onclick="showSection('overview', event)">Ãœbersicht</button>
            <button class="tab-button" onclick="showSection('vocabulary', event)">Wortschatz</button>
            <button class="tab-button" onclick="showSection('grammar', event)">Grammatik</button>
            <button class="tab-button" onclick="showSection('reading', event)">Leseteil</button>
            <button class="tab-button" onclick="showSection('listening', event)">HÃ¶ren & Sprechen</button>
            <button class="tab-button" onclick="showSection('writing', event)">Schreiben</button>
        </nav>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <!-- Ãœbersicht Section -->
        <div id="overview" class="lesson-panel active">
            <h1><span class="emoji-bounce">ğŸ“</span> Lektion 2: Kernkompetenzen der Patientenversorgung<br>
                <span class="vietnamese">BÃ i há»c 2: NÄƒng lá»±c cá»‘t lÃµi trong chÄƒm sÃ³c bá»‡nh nhÃ¢n</span>
            </h1>
            <div class="production-section">
                <h2><span class="emoji-wave">ğŸ“‹</span> Ãœbersicht der Stunde <em class="vietnamese">Tá»•ng quan bÃ i há»c</em></h2>
                <p><strong>Dauer:</strong> 90 Minuten <span class="emoji-bounce">â°</span> <em class="vietnamese">Thá»i gian: 90 phÃºt</em></p>
                <p><strong>Ziel:</strong> Pflegeaufgaben und Nachtdienst verstehen <span class="emoji-bounce">ğŸ¯</span> <em class="vietnamese">Má»¥c tiÃªu: Hiá»ƒu nhiá»‡m vá»¥ chÄƒm sÃ³c vÃ  ca Ä‘Ãªm</em></p>
                <h3>Heute lernen wir: <span class="emoji-bounce">ğŸ“š</span> <em class="vietnamese">HÃ´m nay chÃºng ta sáº½ há»c:</em></h3>
                <ul>
                    <li>Umgang mit Fehlern in der Pflege <span class="emoji-bounce">â—</span> <em class="vietnamese">CÃ¡ch xá»­ lÃ½ lá»—i trong chÄƒm sÃ³c</em></li>
                    <li>Aufgaben der Nachtschicht <span class="emoji-bounce">ğŸŒ™</span> <em class="vietnamese">Nhiá»‡m vá»¥ ca Ä‘Ãªm</em></li>
                    <li>Modalverben im PrÃ¤teritum <span class="emoji-bounce">ğŸ”¤</span> <em class="vietnamese">Äá»™ng tá»« khuyáº¿t thiáº¿u á»Ÿ quÃ¡ khá»©</em></li>
                    <li>Wichtigkeit der Ãœbergabe <span class="emoji-bounce">ğŸ¤</span> <em class="vietnamese">Táº§m quan trá»ng cá»§a viá»‡c bÃ n giao</em></li>
                </ul>
            </div>
            <div class="production-section">
                <h3>Interessante Fakten <span class="emoji-bounce">ğŸ’¡</span> <em class="vietnamese">Nhá»¯ng sá»± tháº­t thÃº vá»‹</em></h3>
                <div class="interesting-facts">
                    <p>ğŸŒ™ In Deutschland arbeiten etwa 15% aller PflegekrÃ¤fte im Nachtdienst<br>
                    <em class="vietnamese">á» Äá»©c khoáº£ng 15% nhÃ¢n viÃªn y táº¿ lÃ m ca Ä‘Ãªm</em></p>
                    <p>ğŸ’Š Medikationsfehler passieren am hÃ¤ufigsten zwischen 22-6 Uhr<br>
                    <em class="vietnamese">Lá»—i dÃ¹ng thuá»‘c xáº£y ra nhiá»u nháº¥t tá»« 22h-6h</em></p>
                    <p>ğŸ“‹ Eine ordnungsgemÃ¤ÃŸe Ãœbergabe dauert durchschnittlich 15-20 Minuten<br>
                    <em class="vietnamese">Má»™t cuá»™c bÃ n giao Ä‘Ãºng quy trÃ¬nh kÃ©o dÃ i 15-20 phÃºt</em></p>
                    <p>ğŸ˜„ Lachen produziert Endorphine und unterstÃ¼tzt die Heilung<br>
                    <em class="vietnamese">CÆ°á»i táº¡o ra endorphin vÃ  há»— trá»£ quÃ¡ trÃ¬nh chá»¯a lÃ nh</em></p>
                </div>
            </div>
        </div>

        <!-- Vocabulary Section -->
        <div id="vocabulary" class="lesson-panel">
            <div class="vocabulary-section">
                <h2><span class="emoji-bounce">ğŸ—£ï¸</span> Vokabelteil <em class="vietnamese">Pháº§n tá»« vá»±ng</em></h2>
                <p><strong>Zeit:</strong> 15 Minuten <span class="emoji-bounce">â³</span> <em class="vietnamese">Thá»i gian: 15 phÃºt</em></p>
                <h3>Grundwortschatz: <span class="emoji-bounce">ğŸ§ </span> <em class="vietnamese">Tá»« vá»±ng cÆ¡ báº£n</em></h3>
                <div class="vocab-grid">
                    <div class="vocab-item">
                        <a class="vocab-word" href="https://www.google.com/search?tbm=isch&q=schusselig" target="_blank">schusselig</a>
                        <span class="vocab-ipa">[ËˆÊƒÊŠsÉ™lÉªÃ§]</span><br>
                        <span class="vocab-vietnamese">vá»¥ng vá»</span>
                        <div class="vocab-sample">Er ist manchmal schusselig und vergisst oft seine SchlÃ¼ssel.</div>
                        <div class="vocab-controls">
                            <button class="sound-button" onclick="playSound('schusselig')">ğŸ”Š</button>
                        </div>
                    </div>

                    <div class="vocab-item">
                        <a class="vocab-word" href="https://www.google.com/search?tbm=isch&q=die+Bettbremse" target="_blank">die Bettbremse</a>
                        <span class="vocab-ipa">[diË ËˆbÉ›tbrÉ›mzÉ™]</span><br>
                        <span class="vocab-vietnamese">phanh giÆ°á»ng</span>
                        <div class="vocab-sample">Bitte prÃ¼fen Sie, ob die Bettbremse aktiviert ist.</div>
                        <div class="vocab-controls">
                            <button class="sound-button" onclick="playSound('bettbremse')">ğŸ”Š</button>
                        </div>
                    </div>

                    <div class="vocab-item">
                        <a class="vocab-word" href="https://www.google.com/search?tbm=isch&q=verwechseln" target="_blank">verwechseln</a>
                        <span class="vocab-ipa">[fÉ›ÉÌ¯ËˆvÉ›ksÉ™ln]</span><br>
                        <span class="vocab-vietnamese">nháº§m láº«n</span>
                        <div class="vocab-sample">Tim hat die Zimmernummern verwechselt.</div>
                        <div class="vocab-controls">
                            <button class="sound-button" onclick="playSound('verwechseln')">ğŸ”Š</button>
                        </div>
                    </div>

                    <div class="vocab-item">
                        <a class="vocab-word" href="https://www.google.com/search?tbm=isch&q=Praxisanleiterin" target="_blank">die Praxisanleiterin</a>
                        <span class="vocab-ipa">[diË ËˆpraksÉªsanlaÉªtÉ™rÉªn]</span><br>
                        <span class="vocab-vietnamese">ngÆ°á»i hÆ°á»›ng dáº«n thá»±c hÃ nh</span>
                        <div class="vocab-sample">Die Praxisanleiterin hilft den Praktikanten.</div>
                        <div class="vocab-controls">
                            <button class="sound-button" onclick="playSound('praxisanleiterin')">ğŸ”Š</button>
                        </div>
                    </div>

                    <div class="vocab-item">
                        <a class="vocab-word" href="https://www.google.com/search?tbm=isch&q=hilfsbereit" target="_blank">hilfsbereit</a>
                        <span class="vocab-ipa">[ËˆhÉªlfsbÉ™raÉªt]</span><br>
                        <span class="vocab-vietnamese">hay giÃºp Ä‘á»¡</span>
                        <div class="vocab-sample">Sie ist immer hilfsbereit zu ihren Kollegen.</div>
                        <div class="vocab-controls">
                            <button class="sound-button" onclick="playSound('hilfsbereit')">ğŸ”Š</button>
                        </div>
                    </div>
                </div>

                <h3>Fachwortschatz: <span class="emoji-bounce">ğŸ¥</span> <em class="vietnamese">Tá»« vá»±ng chuyÃªn ngÃ nh</em></h3>
                <div class="vocab-grid">
                    <div class="vocab-item">
                        <a class="vocab-word" href="https://www.google.com/search?tbm=isch&q=Nachtschicht" target="_blank">die Nachtschicht</a>
                        <span class="vocab-ipa">[diË ËˆnaxtÊƒÉªÃ§t]</span><br>
                        <span class="vocab-vietnamese">ca Ä‘Ãªm</span>
                        <div class="vocab-sample">Anna arbeitet heute in der Nachtschicht.</div>
                        <div class="vocab-controls">
                            <button class="sound-button" onclick="playSound('nachtschicht')">ğŸ”Š</button>
                        </div>
                    </div>

                    <div class="vocab-item">
                        <a class="vocab-word" href="https://www.google.com/search?tbm=isch&q=Medikation" target="_blank">die Medikation</a>
                        <span class="vocab-ipa">[diË medikaËˆtÍ¡siÌ¯oËn]</span><br>
                        <span class="vocab-vietnamese">viá»‡c dÃ¹ng thuá»‘c</span>
                        <div class="vocab-sample">Die Medikation muss regelmÃ¤ÃŸig Ã¼berprÃ¼ft werden.</div>
                        <div class="vocab-controls">
                            <button class="sound-button" onclick="playSound('medikation')">ğŸ”Š</button>
                        </div>
                    </div>

                    <div class="vocab-item">
                        <a class="vocab-word" href="https://www.google.com/search?tbm=isch&q=Bereitschaftsarzt" target="_blank">der Bereitschaftsarzt</a>
                        <span class="vocab-ipa">[deËÉÌ¯ bÉ™ËˆraÉªtÊƒaftsarÊ¦t]</span><br>
                        <span class="vocab-vietnamese">bÃ¡c sÄ© trá»±c</span>
                        <div class="vocab-sample">Der Bereitschaftsarzt ist nachts erreichbar.</div>
                        <div class="vocab-controls">
                            <button class="sound-button" onclick="playSound('bereitschaftsarzt')">ğŸ”Š</button>
                        </div>
                    </div>

                    <div class="vocab-item">
                        <a class="vocab-word" href="https://www.google.com/search?tbm=isch&q=Ãœbergabe" target="_blank">die Ãœbergabe</a>
                        <span class="vocab-ipa">[diË ËˆyËbÉÉ¡aËbÉ™]</span><br>
                        <span class="vocab-vietnamese">viá»‡c bÃ n giao</span>
                        <div class="vocab-sample">Die Ãœbergabe ist fÃ¼r die KontinuitÃ¤t der Pflege wichtig.</div>
                        <div class="vocab-controls">
                            <button class="sound-button" onclick="playSound('uebergabe')">ğŸ”Š</button>
                        </div>
                    </div>

                    <div class="vocab-item">
                        <a class="vocab-word" href="https://www.google.com/search?tbm=isch&q=KontinuitÃ¤t+der+Pflege" target="_blank">die KontinuitÃ¤t der Pflege</a>
                        <span class="vocab-ipa">[diË kÉ”ntinuiËˆtÉ›Ët deËÉÌ¯ ËˆpfleËÉ¡É™]</span><br>
                        <span class="vocab-vietnamese">tÃ­nh liÃªn tá»¥c cá»§a viá»‡c chÄƒm sÃ³c</span>
                        <div class="vocab-sample">KontinuitÃ¤t der Pflege ist fÃ¼r Patienten sehr wichtig.</div>
                        <div class="vocab-controls">
                            <button class="sound-button" onclick="playSound('kontinuitaet')">ğŸ”Š</button>
                        </div>
                    </div>
                </div>

                <div class="interactive-exercise">
                    <h3>AktivitÃ¤t: <span class="emoji-bounce">ğŸ”—</span> <em class="vietnamese">Hoáº¡t Ä‘á»™ng</em></h3>
                    <p><strong>Verbinden Sie das deutsche Wort mit der Bedeutung:</strong><br>
                    <em class="vietnamese">Ná»‘i tá»« tiáº¿ng Äá»©c vá»›i nghÄ©a:</em></p>
                    
                    <div class="exercise-item">
                        <p>1. schusselig</p>
                        <select class="exercise-input" id="vocab1">
                            <option value="">WÃ¤hlen Sie...</option>
                            <option value="correct">vá»¥ng vá»</option>
                            <option value="wrong1">phanh giÆ°á»ng</option>
                            <option value="wrong2">ca Ä‘Ãªm</option>
                        </select>
                    </div>

                    <div class="exercise-item">
                        <p>2. die Nachtschicht</p>
                        <select class="exercise-input" id="vocab2">
                            <option value="">WÃ¤hlen Sie...</option>
                            <option value="wrong1">viá»‡c dÃ¹ng thuá»‘c</option>
                            <option value="correct">ca Ä‘Ãªm</option>
                            <option value="wrong2">viá»‡c bÃ n giao</option>
                        </select>
                    </div>

                    <div class="exercise-item">
                        <p>3. die Ãœbergabe</p>
                        <select class="exercise-input" id="vocab3">
                            <option value="">WÃ¤hlen Sie...</option>
                            <option value="wrong1">bÃ¡c sÄ© trá»±c</option>
                            <option value="wrong2">ngÆ°á»i hÆ°á»›ng dáº«n</option>
                            <option value="correct">viá»‡c bÃ n giao</option>
                        </select>
                    </div>

                    <button class="check-button" onclick="checkVocabulary()">Antworten Ã¼berprÃ¼fen</button>
                    <div id="vocabFeedback"></div>
                </div>
            </div>
        </div>

        <!-- Grammar Section -->
        <div id="grammar" class="lesson-panel">
            <div class="grammar-section">
                <h2><span class="emoji-bounce">ğŸ“–</span> Grammatikteil <em class="vietnamese">Pháº§n ngá»¯ phÃ¡p</em></h2>
                <p><strong>Zeit:</strong> 20 Minuten <span class="emoji-bounce">â³</span> <em class="vietnamese">Thá»i gian: 20 phÃºt</em></p>
                <h3>Fokus: Modalverben im PrÃ¤teritum <span class="emoji-bounce">ğŸ”¤</span> <em class="vietnamese">Trá»ng tÃ¢m: Äá»™ng tá»« khuyáº¿t thiáº¿u á»Ÿ thÃ¬ quÃ¡ khá»©</em></h3>

                <div class="grammar-examples">
                    <h4>Konjugation: <span class="emoji-bounce">ğŸ”„</span> <em class="vietnamese">Chia Ä‘á»™ng tá»«</em></h4>
                    <table class="grammar-table">
                        <thead>
                            <tr>
                                <th>Infinitiv</th>
                                <th>ich</th>
                                <th>du</th>
                                <th>er/sie/es</th>
                                <th>Vietnamese</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>mÃ¼ssen</strong></td>
                                <td>ich musste</td>
                                <td>du musstest</td>
                                <td>er/sie/es musste</td>
                                <td><em>pháº£i</em></td>
                            </tr>
                            <tr>
                                <td><strong>kÃ¶nnen</strong></td>
                                <td>ich konnte</td>
                                <td>du konntest</td>
                                <td>er/sie/es konnte</td>
                                <td><em>cÃ³ thá»ƒ</em></td>
                            </tr>
                            <tr>
                                <td><strong>wollen</strong></td>
                                <td>ich wollte</td>
                                <td>du wolltest</td>
                                <td>er/sie/es wollte</td>
                                <td><em>muá»‘n</em></td>
                            </tr>
                            <tr>
                                <td><strong>sollen</strong></td>
                                <td>ich sollte</td>
                                <td>du solltest</td>
                                <td>er/sie/es sollte</td>
                                <td><em>nÃªn</em></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="grammar-examples">
                    <h4>Beispiele aus dem Text: <span class="emoji-bounce">ğŸ“š</span> <em class="vietnamese">VÃ­ dá»¥ tá»« vÄƒn báº£n</em></h4>
                    <ul>
                        <li>"Tim <strong>wollte</strong> einer Ã¤lteren Dame helfen" <em class="vietnamese">Tim muá»‘n giÃºp má»™t bÃ  cá»¥</em></li>
                        <li>"Er <strong>sollte</strong> Frau Schmidt beim Duschen helfen" <em class="vietnamese">Anh áº¥y nÃªn giÃºp bÃ  Schmidt táº¯m</em></li>
                        <li>"Anna <strong>musste</strong> den Bereitschaftsarzt anrufen" <em class="vietnamese">Anna pháº£i gá»i bÃ¡c sÄ© trá»±c</em></li>
                        <li>"Sie <strong>konnte</strong> alle Patienten versorgen" <em class="vietnamese">CÃ´ áº¥y cÃ³ thá»ƒ chÄƒm sÃ³c táº¥t cáº£ bá»‡nh nhÃ¢n</em></li>
                    </ul>
                </div>

                <div class="interactive-exercise">
                    <h3>Ãœbung: <span class="emoji-bounce">âœï¸</span> <em class="vietnamese">BÃ i táº­p</em></h3>
                    <p><strong>Setzen Sie das richtige Modalverb ein:</strong><br>
                    <em class="vietnamese">Äiá»n Ä‘á»™ng tá»« khuyáº¿t thiáº¿u Ä‘Ãºng:</em></p>

                    <div class="exercise-item">
                        <p>1. Tim _______ die Bettbremse aktivieren. (sollen)</p>
                        <input type="text" class="exercise-input" id="grammar1" placeholder="Ihre Antwort hier...">
                    </div>

                    <div class="exercise-item">
                        <p>2. Anna _______ alle Ereignisse dokumentieren. (mÃ¼ssen)</p>
                        <input type="text" class="exercise-input" id="grammar2" placeholder="Ihre Antwort hier...">
                    </div>

                    <div class="exercise-item">
                        <p>3. Die Kollegin _______ Tim helfen. (wollen)</p>
                        <input type="text" class="exercise-input" id="grammar3" placeholder="Ihre Antwort hier...">
                    </div>

                    <button class="check-button" onclick="checkGrammar()">Antworten Ã¼berprÃ¼fen</button>
                    <div id="grammarFeedback"></div>
                </div>
            </div>
        </div>

        <!-- Reading Section -->
        <div id="reading" class="lesson-panel">
            <div class="production-section">
                <h2><span class="emoji-bounce">ğŸ“š</span> Leseteil <em class="vietnamese">Pháº§n Ä‘á»c</em></h2>
                <p><strong>Zeit:</strong> 25 Minuten <span class="emoji-bounce">â³</span> <em class="vietnamese">Thá»i gian: 25 phÃºt</em></p>

                <h3>Text A: Der schusselige Praktikant <span class="emoji-bounce">ğŸ§‘â€âš•ï¸</span></h3>
                <div class="reading-text">
                    <p>Tim macht sein Pflegepraktikum im Krankenhaus und ist sehr motiviert - aber leider auch ziemlich schusselig. Heute ist sein dritter Tag, und er hat schon kleine Katastrophen erlebt.</p>
                    
                    <p>Am ersten Tag wollte er einer Ã¤lteren Dame beim Aufstehen helfen. Dabei vergaÃŸ er, die Bettbremse zu aktivieren. Das Bett rollte weg, und beide fielen fast hin. "Junge, Sie mÃ¼ssen aufpassen!", lachte die Patientin. "Sonst brauche ich nachher noch einen Rollstuhl!"</p>
                    
                    <p>Gestern verwechselte Tim zwei Zimmernummern. Er brachte Herrn Meyer das FrÃ¼hstÃ¼ck fÃ¼r Herrn Weber: vegetarisches MÃ¼sli statt Leberwurst-Brot. Herr Meyer schaute sehr Ã¼berrascht auf den Teller: "Junger Mann, ich bin doch kein Kaninchen!" Tim wurde knallrot und entschuldigte sich hundertmal.</p>
                    
                    <p>Heute morgen passierte schon wieder etwas Lustiges. Tim sollte Frau Schmidt beim Duschen helfen. Er vergaÃŸ, die Wassertemperatur zu prÃ¼fen. Als das kalte Wasser kam, schrie Frau Schmidt: "Himmel, das ist ja eiskalt! Wollen Sie mich wachmachen oder einfrieren?"</p>
                    
                    <p>Seine Praxisanleiterin Susanne ist trotzdem geduldig mit ihm. "Tim ist sehr hilfsbereit und freundlich", sagt sie. "Er macht zwar manchmal kleine Fehler, aber er lernt schnell und die Patienten mÃ¶gen ihn."</p>
                    
                    <p>Das stimmt: Die Bewohner finden Tim lustig und charmant. Herr Paulsen sagt immer: "Wenn Tim kommt, ist der Tag gleich frÃ¶hlicher!" Frau Wagner hat ihm sogar selbstgestrickte Socken geschenkt.</p>
                    
                    <p>Tim ist trotz seiner kleinen Pannen sehr beliebt. Seine Kollegin Anna meint: "Ein bisschen Humor schadet nicht. Lachen ist auch Medizin!" Am Ende seiner Praktikumszeit mÃ¶chte das ganze Team, dass Tim nach seiner Ausbildung wiederkommt.</p>
                    
                    <p>"Ich werde bestimmt vorsichtiger", verspricht Tim. "Aber den Humor behalte ich - der gehÃ¶rt zur guten Pflege dazu!"</p>
                </div>

                <h3>Text B: Die Nachtschicht <span class="emoji-bounce">ğŸŒ™</span></h3>
                <div class="reading-text">
                    <p>Schwester Anna beginnt ihre Nachtschicht um 22 Uhr. Obwohl das Krankenhaus in der Nacht ruhiger wird, gibt es immer noch viel zu tun. WÃ¤hrend sie die Patientenakte durchliest, Ã¼berprÃ¼ft sie die Medikation, die wÃ¤hrend der Nacht verabreicht werden muss.</p>
                    
                    <p>Herr Weber, der nach einer Operation im Zimmer 205 liegt, klingelt um Mitternacht. "Ich habe starke Schmerzen", klagt er. Anna Ã¼berprÃ¼ft seine Akte und stellt fest, dass er bereits die maximale Dosis Schmerzmittel erhalten hat. Sie ruft den Bereitschaftsarzt an, der eine andere Medikation verordnet.</p>
                    
                    <p>Um 3 Uhr morgens wird eine Ã¤ltere Dame eingeliefert, die gestÃ¼rzt ist. Die AngehÃ¶rigen, die sehr besorgt sind, begleiten sie. "Ist meine Mutter in Gefahr?", fragt die Tochter Ã¤ngstlich. Anna beruhigt sie und erklÃ¤rt, dass alle notwendigen Untersuchungen durchgefÃ¼hrt werden.</p>
                    
                    <p>Bevor die Tagschicht beginnt, dokumentiert Anna alle Ereignisse der Nacht. Die Ãœbergabe an ihre Kollegin ist sehr wichtig, damit die KontinuitÃ¤t der Pflege gewÃ¤hrleistet ist. Obwohl die Nachtarbeit anstrengend ist, schÃ¤tzt Anna die besondere AtmosphÃ¤re und die intensivere Betreuung der Patienten.</p>
                </div>

                <div class="error-analysis">
                    <h3>Fehleranalyse <span class="emoji-bounce">ğŸ”</span> <em class="vietnamese">PhÃ¢n tÃ­ch lá»—i</em></h3>
                    <p><strong>Diskutieren Sie Tims Fehler und schreiben Sie die korrekte Vorgehensweise:</strong><br>
                    <em class="vietnamese">Tháº£o luáº­n vá» lá»—i cá»§a Tim vÃ  viáº¿t quy trÃ¬nh Ä‘Ãºng:</em></p>

                    <div class="error-item">
                        <p><strong>Fehler:</strong> Tim vergisst die Bettbremse zu aktivieren</p>
                        <p><strong>Korrekte Vorgehensweise:</strong> <em class="vietnamese">Quy trÃ¬nh Ä‘Ãºng:</em></p>
                        <input type="text" class="exercise-input" id="error1" placeholder="Schreiben Sie hier...">
                    </div>

                    <div class="error-item">
                        <p><strong>Fehler:</strong> Tim prÃ¼ft die Wassertemperatur nicht</p>
                        <p><strong>Korrekte Vorgehensweise:</strong></p>
                        <input type="text" class="exercise-input" id="error2" placeholder="Schreiben Sie hier...">
                    </div>

                    <div class="error-item">
                        <p><strong>Fehler:</strong> Tim verwechselt Zimmernummern</p>
                        <p><strong>Korrekte Vorgehensweise:</strong></p>
                        <input type="text" class="exercise-input" id="error3" placeholder="Schreiben Sie hier...">
                    </div>

                    <button class="check-button" onclick="saveErrors()">Antworten speichern</button>
                    <div id="errorFeedback"></div>
                </div>

                <div class="interactive-exercise">
                    <h3>TextverstÃ¤ndnis <span class="emoji-bounce">â“</span> <em class="vietnamese">Hiá»ƒu bÃ i Ä‘á»c</em></h3>
                    <p><strong>Beantworten Sie die Fragen:</strong> <em class="vietnamese">Tráº£ lá»i cÃ¢u há»i:</em></p>

                    <div class="exercise-item">
                        <p>1. Warum ist Tim bei den Patienten beliebt? <em class="vietnamese">Táº¡i sao Tim Ä‘Æ°á»£c bá»‡nh nhÃ¢n yÃªu thÃ­ch?</em></p>
                        <textarea class="exercise-input" id="reading1" placeholder="Ihre Antwort..."></textarea>
                    </div>

                    <div class="exercise-item">
                        <p>2. Was passiert um Mitternacht in der Nachtschicht? <em class="vietnamese">Äiá»u gÃ¬ xáº£y ra lÃºc ná»­a Ä‘Ãªm trong ca Ä‘Ãªm?</em></p>
                        <textarea class="exercise-input" id="reading2" placeholder="Ihre Antwort..."></textarea>
                    </div>

                    <div class="exercise-item">
                        <p>3. Warum ist die Ãœbergabe wichtig? <em class="vietnamese">Táº¡i sao viá»‡c bÃ n giao quan trá»ng?</em></p>
                        <textarea class="exercise-input" id="reading3" placeholder="Ihre Antwort..."></textarea>
                    </div>

                    <button class="check-button" onclick="saveReading()">Antworten speichern</button>
                    <div id="readingFeedback"></div>
                </div>
            </div>
        </div>

        <!-- Listening and Speaking Section -->
        <div id="listening" class="lesson-panel">
            <div class="production-section">
                <h2><span class="emoji-bounce">ğŸ§</span> HÃ¶r- und Sprechteil <em class="vietnamese">Pháº§n nghe vÃ  nÃ³i</em></h2>
                <p><strong>Zeit:</strong> 15 Minuten <span class="emoji-bounce">â³</span> <em class="vietnamese">Thá»i gian: 15 phÃºt</em></p>

                <h3>Diktat-Ãœbung <span class="emoji-bounce">ğŸ“</span> <em class="vietnamese">BÃ i táº­p chÃ­nh táº£</em></h3>
                <p><strong>Partner A liest vor, Partner B schreibt:</strong><br>
                <em class="vietnamese">Báº¡n A Ä‘á»c, Báº¡n B viáº¿t:</em></p>

                <div class="interactive-exercise">
                    <div class="exercise-item">
                        <p><strong>Satz 1:</strong> <button class="sound-button" onclick="playDictation(1)">ğŸ”Š AnhÃ¶ren</button></p>
                        <input type="text" class="exercise-input" id="dictation1" placeholder="Schreiben Sie hier...">
                        <div class="print-only">
                            <em>Text: "Die Nachtschicht erfordert besondere Aufmerksamkeit."</em>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <p><strong>Satz 2:</strong> <button class="sound-button" onclick="playDictation(2)">ğŸ”Š AnhÃ¶ren</button></p>
                        <input type="text" class="exercise-input" id="dictation2" placeholder="Schreiben Sie hier...">
                        <div class="print-only">
                            <em>Text: "Praktikanten mÃ¼ssen die Bettbremse immer aktivieren."</em>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <p><strong>Satz 3:</strong> <button class="sound-button" onclick="playDictation(3)">ğŸ”Š AnhÃ¶ren</button></p>
                        <input type="text" class="exercise-input" id="dictation3" placeholder="Schreiben Sie hier...">
                        <div class="print-only">
                            <em>Text: "Der Bereitschaftsarzt verordnet neue Medikation."</em>
                        </div>
                    </div>

                    <button class="check-button" onclick="checkDictation()">Rechtschreibung Ã¼berprÃ¼fen</button>
                    <div id="dictationFeedback"></div>
                </div>

                <h3>Rollenspiel <span class="emoji-bounce">ğŸ­</span> <em class="vietnamese">Diá»…n ká»‹ch vai</em></h3>
                <div class="production-section">
                    <p><strong>Situation:</strong> Ãœbergabe zwischen Nacht- und Tagschicht<br>
                    <em class="vietnamese">TÃ¬nh huá»‘ng: BÃ n giao giá»¯a ca Ä‘Ãªm vÃ  ca ngÃ y</em></p>

                    <div class="roleplay-setup">
                        <p><strong>Person A:</strong> Nachtschicht <em class="vietnamese">(ca Ä‘Ãªm)</em></p>
                        <p><strong>Person B:</strong> Tagschicht <em class="vietnamese">(ca ngÃ y)</em></p>
                    </div>

                    <div class="grammar-examples">
                        <h4>NÃ¼tzliche AusdrÃ¼cke: <span class="emoji-bounce">ğŸ’¬</span> <em class="vietnamese">Cá»¥m tá»« há»¯u Ã­ch</em></h4>
                        <ul>
                            <li>"Herr X hatte in der Nacht..." <em class="vietnamese">Ã”ng X Ä‘Ãªm qua Ä‘Ã£...</em></li>
                            <li>"Die Medikation wurde..." <em class="vietnamese">Thuá»‘c Ä‘Ã£ Ä‘Æ°á»£c...</em></li>
                            <li>"Besonders zu beachten ist..." <em class="vietnamese">Cáº§n Ä‘áº·c biá»‡t chÃº Ã½...</em></li>
                            <li>"Um ... Uhr..." <em class="vietnamese">LÃºc ... giá»...</em></li>
                            <li>"Der Patient klagte Ã¼ber..." <em class="vietnamese">Bá»‡nh nhÃ¢n phÃ n nÃ n vá»...</em></li>
                            <li>"Es gab keine Probleme mit..." <em class="vietnamese">KhÃ´ng cÃ³ váº¥n Ä‘á» gÃ¬ vá»›i...</em></li>
                        </ul>
                    </div>

                    <div class="writing-area">
                        <p><strong>Bereiten Sie Ihr Rollenspiel vor:</strong> <em class="vietnamese">Chuáº©n bá»‹ diá»…n ká»‹ch cá»§a báº¡n:</em></p>
                        <textarea class="writing-textarea" id="roleplayPrep" placeholder="Notieren Sie hier Ihre Ideen fÃ¼r das Rollenspiel..."></textarea>
                        <div class="word-count" id="roleplayCount">0 WÃ¶rter</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Writing Section -->
        <div id="writing" class="lesson-panel">
            <div class="production-section">
                <h2><span class="emoji-bounce">âœï¸</span> SchreibÃ¼bung <em class="vietnamese">BÃ i táº­p viáº¿t</em></h2>
                <p><strong>Zeit:</strong> 10 Minuten <span class="emoji-bounce">â³</span> <em class="vietnamese">Thá»i gian: 10 phÃºt</em></p>

                <h3>Aufgabe: <span class="emoji-bounce">ğŸ“</span> <em class="vietnamese">Nhiá»‡m vá»¥</em></h3>
                <p><strong>Schreiben Sie einen Bericht Ã¼ber eine Nachtschicht (100-120 WÃ¶rter):</strong><br>
                <em class="vietnamese">Viáº¿t bÃ¡o cÃ¡o vá» ca Ä‘Ãªm 100-120 tá»«:</em></p>

                <div class="grammar-examples">
                    <h4>Verwenden Sie diese WÃ¶rter: <span class="emoji-bounce">ğŸ—’ï¸</span> <em class="vietnamese">Sá»­ dá»¥ng nhá»¯ng tá»« nÃ y:</em></h4>
                    <ul>
                        <li><strong>Nachtschicht</strong> - ca Ä‘Ãªm</li>
                        <li><strong>Medikation</strong> - viá»‡c dÃ¹ng thuá»‘c</li>
                        <li><strong>Bereitschaftsarzt</strong> - bÃ¡c sÄ© trá»±c</li>
                        <li><strong>Ãœbergabe</strong> - viá»‡c bÃ n giao</li>
                        <li><strong>dokumentieren</strong> - ghi chÃ©p láº¡i</li>
                    </ul>
                </div>

                <div class="grammar-examples">
                    <h4>Struktur: <span class="emoji-bounce">ğŸ“‘</span> <em class="vietnamese">Cáº¥u trÃºc:</em></h4>
                    <ul>
                        <li><strong>Beginn der Schicht</strong> <em class="vietnamese">Báº¯t Ä‘áº§u ca</em></li>
                        <li><strong>Wichtige Ereignisse</strong> <em class="vietnamese">Sá»± kiá»‡n quan trá»ng</em></li>
                        <li><strong>Ãœbergabe</strong> <em class="vietnamese">BÃ n giao</em></li>
                    </ul>
                </div>

                <div class="writing-area">
                    <h4>"Nachtschicht vom 15. MÃ¤rz 2025" <span class="emoji-bounce">ğŸŒ™</span> <em class="vietnamese">Ca Ä‘Ãªm ngÃ y 15 thÃ¡ng 3 nÄƒm 2025</em></h4>
                    <textarea class="writing-textarea" id="nightshiftReport" placeholder="Beginnen Sie hier Ihren Bericht...

Beispiel-Anfang:
Um 22 Uhr begann meine Nachtschicht im Krankenhaus..."></textarea>
                    <div class="word-count" id="reportCount">0/120 WÃ¶rter</div>
                    <div class="save-indicator" id="saveIndicator"></div>
                </div>

                <h3>Hausaufgabe: <span class="emoji-bounce">ğŸ </span> <em class="vietnamese">BÃ i táº­p vá» nhÃ </em></h3>
                <p><strong>Beschreiben Sie einen typischen Nachtdienst (50 WÃ¶rter)</strong><br>
                <em class="vietnamese">MÃ´ táº£ má»™t ca Ä‘Ãªm Ä‘iá»ƒn hÃ¬nh 50 tá»«</em></p>

                <div class="writing-area">
                    <textarea class="writing-textarea" id="homework" placeholder="Schreiben Sie hier Ihre Hausaufgabe..."></textarea>
                    <div class="word-count" id="homeworkCount">0/50 WÃ¶rter</div>
                    <div class="save-indicator" id="homeworkSave"></div>
                </div>

                <button class="check-button" onclick="saveAllWriting()">Alle Texte speichern</button>
            </div>

            <div class="vocabulary-section">
                <h3>Zusammenfassung <span class="emoji-bounce">ğŸ§¾</span> <em class="vietnamese">TÃ³m táº¯t</em></h3>
                <p><strong>Heute haben wir gelernt:</strong> <em class="vietnamese">HÃ´m nay chÃºng ta Ä‘Ã£ há»c:</em></p>
                <ul>
                    <li>Umgang mit Fehlern in der Pflege <span class="emoji-bounce">â—</span> <em class="vietnamese">CÃ¡ch xá»­ lÃ½ lá»—i trong chÄƒm sÃ³c</em></li>
                    <li>Aufgaben der Nachtschicht <span class="emoji-bounce">ğŸŒ™</span> <em class="vietnamese">Nhiá»‡m vá»¥ ca Ä‘Ãªm</em></li>
                    <li>Modalverben im PrÃ¤teritum <span class="emoji-bounce">ğŸ”¤</span> <em class="vietnamese">Äá»™ng tá»« khuyáº¿t thiáº¿u á»Ÿ quÃ¡ khá»©</em></li>
                    <li>Wichtigkeit der Ãœbergabe <span class="emoji-bounce">ğŸ¤</span> <em class="vietnamese">Táº§m quan trá»ng cá»§a viá»‡c bÃ n giao</em></li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Global variables for lesson management
        let currentSection = 'overview';
        let lessonProgress = {
            overview: true,
            vocabulary: false,
            grammar: false,
            reading: false,
            listening: false,
            writing: false
        };

        // Auto-save data
        let saveTimeout;
        let autosaveInterval;

        // Initialize lesson on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadProgress();
            updateProgress();
            setupAutoSave();
            restoreStudentInputs();
        });

        // Section navigation
        function showSection(sectionId, event) {
            // Hide all panels
            const panels = document.querySelectorAll('.lesson-panel');
            panels.forEach(panel => panel.classList.remove('active'));

            // Hide all tab buttons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));

            // Show selected panel and activate button
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');

            // Update progress
            lessonProgress[sectionId] = true;
            currentSection = sectionId;
            updateProgress();
            saveProgress();
        }

        // Progress management
        function updateProgress() {
            const completed = Object.values(lessonProgress).filter(x => x).length;
            const total = Object.keys(lessonProgress).length;
            const percentage = (completed / total) * 100;
            
            document.getElementById('progressBar').style.width = percentage + '%';
        }

        function saveProgress() {
            const progress = {
                currentSection: currentSection,
                lessonProgress: lessonProgress,
                timestamp: new Date().toISOString()
            };
            
            // Use in-memory storage since localStorage not available in artifacts
            window.lessonData = progress;
        }

        function loadProgress() {
            // Load from in-memory storage
            if (window.lessonData) {
                const saved = window.lessonData;
                lessonProgress = saved.lessonProgress || lessonProgress;
                currentSection = saved.currentSection || 'overview';
            }
        }

        // Audio functionality (Speech Synthesis only, standalone)
        function playSound(word) {
            if ('speechSynthesis' in window) {
                var utter = new SpeechSynthesisUtterance(word);
                utter.lang = 'de-DE';
                window.speechSynthesis.speak(utter);

                const feedback = document.createElement('div');
                feedback.className = 'feedback correct';
                feedback.textContent = `ğŸ”Š "${word}" wird mit Sprachausgabe vorgelesen...`;
                feedback.style.position = 'fixed';
                feedback.style.top = '20px';
                feedback.style.right = '20px';
                feedback.style.zIndex = '1000';
                feedback.style.padding = '10px';
                feedback.style.borderRadius = '5px';
                document.body.appendChild(feedback);
                setTimeout(() => {
                    document.body.removeChild(feedback);
                }, 2000);
            } else {
                alert('Sprachausgabe wird von Ihrem Browser nicht unterstÃ¼tzt.');
            }
        }

        function playDictation(number) {
            const sentences = {
                1: "Die Nachtschicht erfordert besondere Aufmerksamkeit.",
                2: "Praktikanten mÃ¼ssen die Bettbremse immer aktivieren.",
                3: "Der Bereitschaftsarzt verordnet neue Medikation."
            };
            
            const feedback = document.createElement('div');
            feedback.className = 'feedback';
            feedback.style.background = '#e3f2fd';
            feedback.style.color = '#1565c0';
            feedback.textContent = `ğŸ”Š "${sentences[number]}"`;
            feedback.style.position = 'fixed';
            feedback.style.top = '20px';
            feedback.style.right = '20px';
            feedback.style.zIndex = '1000';
            feedback.style.padding = '10px';
            feedback.style.borderRadius = '5px';
            
            document.body.appendChild(feedback);
            
            setTimeout(() => {
                document.body.removeChild(feedback);
            }, 3000);
        }

        // Exercise checking functions
        function checkVocabulary() {
            const answers = {
                vocab1: 'correct',
                vocab2: 'correct',
                vocab3: 'correct'
            };
            
            let correct = 0;
            let total = Object.keys(answers).length;
            
            for (let id in answers) {
                const select = document.getElementById(id);
                const isCorrect = select.value === answers[id];
                if (isCorrect) correct++;
                
                select.style.borderColor = isCorrect ? '#28a745' : '#dc3545';
            }
            
            const feedback = document.getElementById('vocabFeedback');
            feedback.innerHTML = `
                <div class="feedback ${correct === total ? 'correct' : 'incorrect'}">
                    ${correct}/${total} richtig! 
                    ${correct === total ? 'Ausgezeichnet! ğŸ‰' : 'Versuchen Sie es noch einmal.'}
                </div>
            `;
        }

        function checkGrammar() {
            const answers = {
                grammar1: 'sollte',
                grammar2: 'musste',
                grammar3: 'wollte'
            };
            
            let correct = 0;
            let total = Object.keys(answers).length;
            
            for (let id in answers) {
                const input = document.getElementById(id);
                const userAnswer = input.value.toLowerCase().trim();
                const isCorrect = userAnswer === answers[id];
                if (isCorrect) correct++;
                
                input.style.borderColor = isCorrect ? '#28a745' : '#dc3545';
            }
            
            const feedback = document.getElementById('grammarFeedback');
            feedback.innerHTML = `
                <div class="feedback ${correct === total ? 'correct' : 'incorrect'}">
                    ${correct}/${total} richtig! 
                    ${correct === total ? 'Sehr gut! ğŸ‰' : 'ÃœberprÃ¼fen Sie die Modalverben im PrÃ¤teritum.'}
                </div>
            `;
        }

        function checkDictation() {
            const correctSentences = {
                dictation1: "Die Nachtschicht erfordert besondere Aufmerksamkeit.",
                dictation2: "Praktikanten mÃ¼ssen die Bettbremse immer aktivieren.",
                dictation3: "Der Bereitschaftsarzt verordnet neue Medikation."
            };
            
            let feedback = '<div class="feedback correct"><h4>Rechtschreibung Ã¼berprÃ¼ft:</h4>';
            
            for (let id in correctSentences) {
                const input = document.getElementById(id);
                const userText = input.value.trim();
                const correctText = correctSentences[id];
                
                feedback += `<p><strong>Satz ${id.slice(-1)}:</strong><br>`;
                feedback += `Ihre Antwort: "${userText}"<br>`;
                feedback += `Korrektur: "${correctText}"</p>`;
            }
            
            feedback += '</div>';
            
            const feedbackElement = document.getElementById('dictationFeedback');
            feedbackElement.innerHTML = feedback;
        }

        function saveErrors() {
            const errors = {
                error1: document.getElementById('error1').value,
                error2: document.getElementById('error2').value,
                error3: document.getElementById('error3').value
            };
            
            const feedback = document.getElementById('errorFeedback');
            feedback.innerHTML = `
                <div class="feedback correct">
                    ${Object.entries(errors).map(([id, answer]) => {
                        return `<p><strong>Fehler:</strong> ${id.replace(/[0-9]/g, '')}: ${answer}</p>`;
                    }).join('')}
                </div>
            `;
        }

        function saveReading() {
            const answers = {
                reading1: document.getElementById('reading1').value,
                reading2: document.getElementById('reading2').value,
                reading3: document.getElementById('reading3').value
            };
            
            const feedback = document.getElementById('readingFeedback');
            feedback.innerHTML = `
                <div class="feedback correct">
                    ${Object.entries(answers).map(([id, answer]) => {
                        return `<p><strong>Frage:</strong> ${id.replace(/[0-9]/g, '').replace(/[A-Z]/g, '').replace(/[a-z]/g, '').replace(/[.,!?]/g, '').replace(/[ ]/g, ' ')}: ${answer}</p>`;
                    }).join('')}
                </div>
            `;
        }

        function saveAllWriting() {
            const report = document.getElementById('nightshiftReport').value;
            const homework = document.getElementById('homework').value;
            
            const feedback = document.getElementById('reportCount');
            feedback.textContent = `${report.length}/${report.split('').filter(c => c !== ' ').length} WÃ¶rter`;
            
            const homeworkFeedback = document.getElementById('homeworkCount');
            homeworkFeedback.textContent = `${homework.length}/${homework.split('').filter(c => c !== ' ').length} WÃ¶rter`;
            
            const saveIndicator = document.getElementById('saveIndicator');
            saveIndicator.textContent = 'Alle Texte gespeichert!';
        }

        // --- AUTOSAVE FEATURE ---
        function setupAutoSave() {
            if (autosaveInterval) clearInterval(autosaveInterval);
            autosaveInterval = setInterval(() => {
                saveStudentInputs();
                showAutosavePopup();
            }, 60000); // 1 minute
        }

        function saveStudentInputs() {
            const data = {
                // Writing section
                nightshiftReport: document.getElementById('nightshiftReport')?.value || '',
                homework: document.getElementById('homework')?.value || '',
                // Reading section
                reading1: document.getElementById('reading1')?.value || '',
                reading2: document.getElementById('reading2')?.value || '',
                reading3: document.getElementById('reading3')?.value || '',
                // Error analysis
                error1: document.getElementById('error1')?.value || '',
                error2: document.getElementById('error2')?.value || '',
                error3: document.getElementById('error3')?.value || '',
                // Grammar exercise
                grammar1: document.getElementById('grammar1')?.value || '',
                grammar2: document.getElementById('grammar2')?.value || '',
                grammar3: document.getElementById('grammar3')?.value || '',
                // Vocabulary exercise
                vocab1: document.getElementById('vocab1')?.value || '',
                vocab2: document.getElementById('vocab2')?.value || '',
                vocab3: document.getElementById('vocab3')?.value || '',
                // Dictation
                dictation1: document.getElementById('dictation1')?.value || '',
                dictation2: document.getElementById('dictation2')?.value || '',
                dictation3: document.getElementById('dictation3')?.value || '',
                // Roleplay
                roleplayPrep: document.getElementById('roleplayPrep')?.value || ''
            };
            try {
                localStorage.setItem('germanLesson2StudentData', JSON.stringify(data));
            } catch (e) {
                // Ignore storage errors
            }
        }

        function restoreStudentInputs() {
            let data = {};
            try {
                data = JSON.parse(localStorage.getItem('germanLesson2StudentData')) || {};
            } catch (e) {}
            // Writing section
            if (document.getElementById('nightshiftReport')) document.getElementById('nightshiftReport').value = data.nightshiftReport || '';
            if (document.getElementById('homework')) document.getElementById('homework').value = data.homework || '';
            // Reading section
            if (document.getElementById('reading1')) document.getElementById('reading1').value = data.reading1 || '';
            if (document.getElementById('reading2')) document.getElementById('reading2').value = data.reading2 || '';
            if (document.getElementById('reading3')) document.getElementById('reading3').value = data.reading3 || '';
            // Error analysis
            if (document.getElementById('error1')) document.getElementById('error1').value = data.error1 || '';
            if (document.getElementById('error2')) document.getElementById('error2').value = data.error2 || '';
            if (document.getElementById('error3')) document.getElementById('error3').value = data.error3 || '';
            // Grammar exercise
            if (document.getElementById('grammar1')) document.getElementById('grammar1').value = data.grammar1 || '';
            if (document.getElementById('grammar2')) document.getElementById('grammar2').value = data.grammar2 || '';
            if (document.getElementById('grammar3')) document.getElementById('grammar3').value = data.grammar3 || '';
            // Vocabulary exercise
            if (document.getElementById('vocab1')) document.getElementById('vocab1').value = data.vocab1 || '';
            if (document.getElementById('vocab2')) document.getElementById('vocab2').value = data.vocab2 || '';
            if (document.getElementById('vocab3')) document.getElementById('vocab3').value = data.vocab3 || '';
            // Dictation
            if (document.getElementById('dictation1')) document.getElementById('dictation1').value = data.dictation1 || '';
            if (document.getElementById('dictation2')) document.getElementById('dictation2').value = data.dictation2 || '';
            if (document.getElementById('dictation3')) document.getElementById('dictation3').value = data.dictation3 || '';
            // Roleplay
            if (document.getElementById('roleplayPrep')) document.getElementById('roleplayPrep').value = data.roleplayPrep || '';
        }

        function showAutosavePopup() {
            const popup = document.createElement('div');
            popup.className = 'feedback correct';
            popup.textContent = 'ğŸ’¾ Autosave: Deine Eingaben wurden automatisch gespeichert!';
            popup.style.position = 'fixed';
            popup.style.bottom = '30px';
            popup.style.right = '30px';
            popup.style.background = '#007bff';
            popup.style.color = 'white';
            popup.style.fontWeight = 'bold';
            popup.style.fontSize = '1.1rem';
            popup.style.padding = '16px 28px';
            popup.style.borderRadius = '10px';
            popup.style.boxShadow = '0 4px 16px rgba(0,0,0,0.15)';
            popup.style.zIndex = '9999';
            popup.style.opacity = '0.95';
            document.body.appendChild(popup);
            setTimeout(() => {
                if (popup.parentNode) popup.parentNode.removeChild(popup);
            }, 3000);
        }
    </script>
</body>
</html>